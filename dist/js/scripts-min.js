"use strict";var API_KEY="AIzaSyBN-ebbmOls-O7YGLwXCJ6_EW2tnsX7LVw",btnGenerate=document.querySelector(".js-generate-video"),youtubeContainer=document.querySelector(".youtube-container"),typeChannelId=document.querySelector(".js-input"),radioBtns=document.querySelectorAll('input[type="radio"]');window.onload=function(){var e=localStorage.getItem("prev");typeChannelId.value=e;var t=localStorage.getItem("radioID");t&&(document.getElementById(t).checked=!0)},radioBtns.forEach(function(e){e.addEventListener("change",function(){var e=localStorage.getItem("radioID"),t=localStorage.getItem("prev");""!==typeChannelId.value&&(typeChannelId.value=""),e&&t&&(localStorage.removeItem("radioID"),localStorage.removeItem("prev"));var n=checkActiveRadio();typeChannelId.placeholder="radio01"===n?"Введите имя канала":"Введите id канала"})});var fetching=function(e){fetch(e).then(function(e){return e.json()}).then(function(e){if(e.items)if(e.prevPageToken||e.nextPageToken)processingData(e);else{var t=e.items[0].id;fetchingById(t)}else alert("Проверьте название канала. Введено несуществующее название канала!")})},checkActiveRadio=function(){return document.querySelector('input[name="search"]:checked').getAttribute("id")};btnGenerate.addEventListener("click",function(){var e=typeChannelId.value;if(e.length)if(localStorage.setItem("radioID",checkActiveRadio()),localStorage.setItem("prev",e),"radio01"===checkActiveRadio())fetchingByChannelName(e);else{if(24!==e.length)return void alert("Недействительный идентификатор канала!");fetchingById(e)}else alert("Введите имя или идентификатор канала!")});var fetchingByChannelName=function(e){fetching("https://www.googleapis.com/youtube/v3/channels?key="+API_KEY+"&part=contentDetails&forUsername="+e)},fetchingById=function(e){fetching("https://www.googleapis.com/youtube/v3/search?key="+API_KEY+"&channelId="+e+"&maxResults=50&pageToken=CDIQAA")},processingData=function(e){var t=e.items.map(function(e){return e.id.videoId});getRandomVideo(t)},getRandomVideo=function(e){var t=e[Math.floor(Math.random()*e.length)];showTemplate(t)},showTemplate=function(e){var t='<iframe src="https://www.youtube.com/embed/'+e+'" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>';youtubeContainer.classList.contains("youtube-container_show")||youtubeContainer.classList.add("youtube-container_show"),youtubeContainer.innerHTML=t};